{"version":3,"sources":["templates.js"],"names":["loadTemplate","loadInlineTemplate","templates","Object","keys","tpl","data","includes","Error","join","total_count","rendered","typeName","itemsTemplate","renderData","items","reduce","prev","curr","index","login","html_url","avatar_url","name","owner","language","stargazers_count","clone_url","title","user","state","assignee","comments","id","type","parse_mode","description","message_text","toString","url","thumb_url"],"mappings":"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","file":"templates.js","sourcesContent":["import {scopes} from './github';\nconst templates = Object.keys(scopes);\n\nexport function loadTemplate(tpl, data) {\n    if (!templates.includes(tpl)) {\n        throw new Error(`Template not found. Use one of these: ${Object.keys(templates).join(', ')}`);\n    }\n    if (data.total_count === 0) {\n        return `No ${tpl} found!\nYou can try with some other keywords.`;\n    }\n    let rendered;\n    let typeName;\n    let itemsTemplate;\n    let renderData;\n    switch (tpl) {\n        case 'users':\n            typeName = data.total_count !== 1\n                ? 'users'\n                : 'user';\n            renderData = {\n                ...data,\n                typeName\n            };\n            itemsTemplate = renderData\n                .items\n                .reduce((prev, curr, index) => {\n                    return `${prev}\n${index + 1}.\n👤 [${curr.login}](${curr.html_url})\n[Repos](https://github.com/${curr.login}?tab=repositories) | ` + `[Activity](https://github.com/${curr.login}?tab=activity) | [Avatar](${curr.avatar_url})\n`;\n                }, '');\n            break;\n\n        case 'repos':\n            typeName = data.total_count !== 1\n                ? 'repos'\n                : 'repo';\n            renderData = {\n                ...data,\n                typeName\n            };\n            itemsTemplate = renderData\n                .items\n                .reduce((prev, curr, index) => {\n                    return `${prev}\n${index + 1}.\n🗄 [${curr.name}](${curr.html_url}) by [${curr.owner.login}](${curr.owner.html_url})` + ` in #${curr.language}\n⭐️ ${curr.stargazers_count} Stars\n📥 [Clone](${curr.clone_url})\n`;\n                }, '');\n            break;\n\n        case 'issues':\n            typeName = data.total_count !== 1\n                ? 'issues'\n                : 'issue';\n            renderData = {\n                ...data,\n                typeName\n            };\n            itemsTemplate = renderData\n                .items\n                .reduce((prev, curr, index) => {\n                    return `${prev}\n${index + 1}.\n🗄 [${curr.title}](${curr.html_url}) by [${curr.user.login}](${curr.user.html_url})` + ` ${curr.state === 'open'\n                        ? '⚪️'\n                        : '⚫️'}\n👤 Assigned to ${curr.assignee\n                            ? '[' + curr.assignee.login + '](' + curr.assignee.html_url + ')'\n                            : 'nobody'}\n💬 ${curr.comments} ${curr.comments === 1\n                                ? 'Comments'\n                                : 'Comment'}\n`;\n                }, '');\n            break;\n\n        default:\n            break;\n    }\n\n    rendered = `I found *${renderData.total_count}* ${renderData.typeName}.\n${renderData.total_count > 10\n        ? `Here is top *10* ${renderData.typeName}:\\n`\n        : ''}${itemsTemplate}`;\n\n    return rendered;\n}\n\nexport function loadInlineTemplate(tpl, data) {\n    if (!templates.includes(tpl)) {\n        throw new Error(`Template not found. Use one of these: ${Object.keys(templates).join(', ')}`);\n    }\n    if (data.total_count === 0) {\n        return [\n            {\n                id: '1',\n                type: 'article',\n                title: `No results!`,\n                parse_mode: 'Markdown',\n                description: `No ${tpl} found!`,\n                message_text: `No ${tpl} found!\n    You can try with some other keywords.`\n            }\n        ];\n    }\n\n    let typeName;\n    let renderData;\n    let rendered;\n\n    switch (tpl) {\n        case 'users':\n            typeName = data.total_count === 1\n                ? 'users'\n                : 'user';\n            renderData = {\n                ...data,\n                typeName\n            };\n            rendered = renderData\n                .items\n                .reduce((prev, curr, index) => {\n                    return [\n                        ...prev, {\n                            id: index.toString(),\n                            type: 'article',\n                            title: `${curr.login}`,\n                            url: `${curr.html_url}`,\n                            thumb_url: `${curr.avatar_url}`,\n                            message_text: `👤 [${curr.login}](${curr.html_url})\n[Repos](https://github.com/${curr.login}?tab=repositories) | ` + `[Activity](https://github.com/${curr.login}?tab=activity) | [Avatar](${curr.avatar_url})\n`,\n                            parse_mode: 'Markdown'\n                        }\n                    ];\n                }, []);\n            return rendered;\n\n        case 'repos':\n            typeName = data.total_count !== 1\n                ? 'repos'\n                : 'repo';\n            renderData = {\n                ...data,\n                typeName\n            };\n            rendered = renderData\n                .items\n                .reduce((prev, curr, index) => {\n                    return [\n                        ...prev, {\n                            id: index.toString(),\n                            type: 'article',\n                            title: `${curr.name} by ${curr.owner.login}`,\n                            description: `#${curr.language}`,\n                            url: `${curr.html_url}`,\n                            thumb_url: `${curr.owner.avatar_url}`,\n                            message_text: `🗄 [${curr.name}](${curr.html_url}) by ` + `[${curr.owner.login}](${curr.owner.html_url})` + ` in #${curr.language}\n⭐️ ${curr.stargazers_count} Stars\n📥 [Clone](${curr.clone_url})\n`,\n                            parse_mode: 'Markdown'\n                        }\n                    ];\n                }, []);\n            return rendered;\n\n        case 'issues':\n            typeName = data.total_count !== 1\n                ? 'issues'\n                : 'issue';\n            renderData = {\n                ...data,\n                typeName\n            };\n            rendered = renderData\n                .items\n                .reduce((prev, curr, index) => {\n                    return [\n                        ...prev, {\n                            id: index.toString(),\n                            type: 'article',\n                            title: `${curr.state === 'open'\n                                ? '⚪️'\n                                : '⚫️'} ${curr.title} by ${curr.user.login}`,\n                            description: `👤 Assigned to ${curr.assignee\n                                ? curr.assignee.login\n                                : 'nobody'}`,\n                            url: `${curr.html_url}`,\n                            thumb_url: `${curr.assignee\n                                ? curr.assignee.avatar_url\n                                : ''}`,\n                            message_text: `🗄 [${curr.title}](${curr.html_url}) ` + `by [${curr.user.login}](${curr.user.html_url})` + ` ${curr.state === 'open'\n                                ? '⚪️'\n                                : '⚫️'}\n👤 Assigned to ${curr.assignee\n                                    ? '[' + curr.assignee.login + '](' + curr.assignee.html_url + ')'\n                                    : 'nobody'}\n💬 ${curr.comments} ${curr.comments !== 1\n                                        ? 'Comments'\n                                        : 'Comment'}\n`,\n                            parse_mode: 'Markdown'\n                        }\n                    ];\n                }, []);\n            return rendered;\n\n        default:\n            break;\n    }\n}\n"]}